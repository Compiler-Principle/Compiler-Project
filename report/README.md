# Compiler Principle Project
小组成员：刘舒菡，范钊瑀，季文卓
## 1 基本信息 

### 1.1 总体介绍 

我们自己设计了一个新语言并且为为这个语言完成了一个编译器。以下是我们使用的主要工具：

+ flex
+ bison
+ LLVM
+ CMake

### 1.2 小组分工 

我们小组由三位同学组成，以下是我们的主要分工：

+ 刘舒菡：词法分析，AST设计与构建，测试用例快速排序
+ 范钊瑀：语法设计，AST可视化，符号表与函数表，测试用例矩阵乘法，进阶主题
+ 季文卓：语法分析，中间代码生成，测试用例选课助手

## 2 语法定义 fzy


## 3 功能实现 

### 3.1 词法分析 lsh

我们主要采用了lex工具帮助我们来完成词法分析。将输入的文件转换为token流。具体的代码见scanner.l。

**注释**

我们的注释采用类似c语言的注释`/*注释*/`

用正则表达式`/*"([^\*]|(\*)*[^\*/])*(\*)*"*/`来识别



### 3.2 语法分析  lsh

### 3.3 AST lsh

### 3.4 符号表和函数表 fzy

### 3.5 中间代码生成 jwz


## 4 进阶主题 fzy

### 4.1 错误检测 

### 4.2 宏展开 

### 4.3 变量优化 

## 5 测试样例

### 5.1 快速排序 lsh

#### 5.1.1 代码实现与简介 

```c--

```

#### 5.1.2 测试结果


### 5.2 矩阵乘法 jwz

#### 5.2.1 代码实现与简介

```c--

```

#### 5.2.2 测试结果


### 选课助手 fbb
#### 代码实现与简介
在选课助手的样例中，程序需要一行行读入学生的培养方案，之后对学生培养方案上的所有课程进行信息汇总，之后得到学生的均绩GPA，总共尝试的学分、已修的学分和剩余学分。
### 5.3 选课助手 fzy

#### 5.3.1 代码实现与简介

```c--

```

#### 5.3.2 测试结果 

## 6 心得体会

**刘舒菡：**

**范钊：**
### 错误检测
在我们的编译器中，定义有一套统一的通知信息输出规范，不同重要性的信息被分为三种级别，分别为最严重的错误：`ERROR`、警告：`WARNING`和通知：`INFO`，


**季文卓：**
### 宏展开



### 变量优化
我们借鉴Golang的设计思想，对于某个作用域中的变量，如果我们在定义之后从来没有使用过它（包括对其赋值、参与算数或逻辑运算等操作），那么在编写程序时此变量应当被优化掉，以减少内存空间的消耗。
我们通过对抽象语法树的两遍遍历，第一次得到了程序中所有能够被用到的变量，第二次对表达式进行分析，得到未被使用的变量，在编译结束的阶段会抛出`WARNING`级别的信息，提示用户某个作用域内存在未使用的变量。

